# E1-S2: Add Client-Side TypeScript Types

## Story
**As a** frontend developer working on DevPulse
**I want** TypeScript interfaces for Project, Session, and DevLog that match the server types
**So that** all client components have type safety and IDE autocompletion for DevPulse data structures

## Status
- **Epic**: Core Dashboard Foundation
- **Priority**: P0-Critical
- **Points**: 2
- **Sprint**: 1
- **Dependencies**: None (this is a prerequisite for E1-S1, E1-S3, E1-S4)

## Acceptance Criteria
- [ ] AC1: `Project` interface exists in `apps/client/src/types.ts` with all fields matching server type at `apps/server/src/types.ts` lines 56-68
- [ ] AC2: `Session` interface exists in `apps/client/src/types.ts` with all fields matching server type at `apps/server/src/types.ts` lines 70-82
- [ ] AC3: `DevLog` interface exists in `apps/client/src/types.ts` with all fields matching server type at `apps/server/src/types.ts` lines 84-97
- [ ] AC4: `SessionStatus` type alias (`'active' | 'idle' | 'waiting' | 'stopped'`) exists in client types
- [ ] AC5: `TestStatus` type alias (`'passing' | 'failing' | 'unknown'`) exists in client types
- [ ] AC6: `WebSocketMessage` type is extended to handle `'projects'` and `'sessions'` message types that the server broadcasts
- [ ] AC7: Existing imports of `Project` and `Session` in `ProjectOverview.vue` (line 124) continue to resolve correctly
- [ ] AC8: No existing type exports are removed or renamed

## Technical Notes

### Current Client Types (`apps/client/src/types.ts`)
The file currently contains: `HumanInTheLoop`, `HumanInTheLoopResponse`, `HumanInTheLoopStatus`, `HookEvent`, `FilterOptions`, `WebSocketMessage`, `TimeRange`, `ChartDataPoint`, `ChartConfig`.

Missing types that `ProjectOverview.vue` already imports on line 124:
```typescript
import type { Project, Session } from '../types';
```
This import currently fails at build time because `Project` and `Session` do not exist in the client types file.

### Server Types to Mirror
From `apps/server/src/types.ts`:

```typescript
// Line 53-54
export type SessionStatus = 'active' | 'idle' | 'waiting' | 'stopped';
export type TestStatus = 'passing' | 'failing' | 'unknown';

// Lines 56-68
export interface Project {
  id?: number;
  name: string;
  path: string;
  current_branch: string;
  active_sessions: number;
  last_activity: number;
  test_status: TestStatus;
  test_summary: string;
  dev_servers: string;        // JSON array of {port, type}
  created_at: number;
  updated_at: number;
}

// Lines 70-82
export interface Session {
  id?: number;
  session_id: string;
  project_name: string;
  source_app: string;
  status: SessionStatus;
  current_branch: string;
  started_at: number;
  last_event_at: number;
  event_count: number;
  model_name: string;
  cwd: string;
}

// Lines 84-97
export interface DevLog {
  id?: number;
  session_id: string;
  project_name: string;
  branch: string;
  summary: string;
  files_changed: string;     // JSON array
  commits: string;           // JSON array
  started_at: number;
  ended_at: number;
  duration_minutes: number;
  event_count: number;
  tool_breakdown: string;    // JSON object {"Read": 5, "Write": 12, ...}
}
```

### WebSocketMessage Update
The server sends `type: 'projects'` (line 348 of `index.ts`) and `type: 'sessions'` (line 351 of `index.ts`) messages. The current `WebSocketMessage` type (client types line 50-53) only handles `'initial' | 'event' | 'hitl_response'`. This must be extended:

```typescript
export interface WebSocketMessage {
  type: 'initial' | 'event' | 'hitl_response' | 'projects' | 'sessions';
  data: HookEvent | HookEvent[] | HumanInTheLoopResponse | Project[] | Session[];
}
```

### Placement
Add the new types after the existing `FilterOptions` interface (after line 48) and before `WebSocketMessage`. This groups all data model types together.

## Tasks
- [ ] Task 1: Add `SessionStatus` type alias after `FilterOptions` interface (after line 48 in `apps/client/src/types.ts`)
- [ ] Task 2: Add `TestStatus` type alias immediately after `SessionStatus`
- [ ] Task 3: Add `Project` interface with all fields matching server type exactly
- [ ] Task 4: Add `Session` interface with all fields matching server type exactly
- [ ] Task 5: Add `DevLog` interface with all fields matching server type exactly
- [ ] Task 6: Update `WebSocketMessage` interface to include `'projects'` and `'sessions'` in the type union and `Project[]` and `Session[]` in the data union
- [ ] Task 7: Verify `ProjectOverview.vue` line 124 import resolves (`import type { Project, Session } from '../types'`)

## Files to Create/Modify
| File | Action | Description |
|------|--------|-------------|
| `apps/client/src/types.ts` | Modify | Add SessionStatus, TestStatus, Project, Session, DevLog types and update WebSocketMessage |

## Testing
- [ ] Test 1: `bun run build` in `apps/client` completes without TypeScript errors
- [ ] Test 2: `ProjectOverview.vue` import of `Project` and `Session` from `../types` resolves
- [ ] Test 3: New `DevLog` type can be imported in other files without errors
- [ ] Test 4: `WebSocketMessage` type accepts `{type: 'projects', data: Project[]}` without errors

## Definition of Done
- [ ] Code compiles without errors (`cd apps/client && bun run build`)
- [ ] All acceptance criteria met
- [ ] No TypeScript errors
- [ ] Existing type exports are unchanged and backward compatible
- [ ] All fields match server types exactly (verified by manual comparison)
