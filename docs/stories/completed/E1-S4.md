# E1-S4: Tab Navigation in App.vue

## Story
**As a** developer using the DevPulse dashboard
**I want** tab navigation to switch between Projects, Events, and Dev Log views
**So that** I can access project overview, event timeline, and session summaries from a single dashboard

## Status
- **Epic**: Core Dashboard Foundation
- **Priority**: P0-Critical
- **Points**: 5
- **Sprint**: 1
- **Dependencies**: E1-S1 (DevLogTimeline component), E1-S2 (client types), E1-S3 (useProjects composable)

## Acceptance Criteria
- [ ] AC1: Three tabs appear below the header: "Projects", "Events", "Dev Log"
- [ ] AC2: "Projects" is the default active tab on page load
- [ ] AC3: "Projects" tab renders `<ProjectOverview>` with live `projects` and `sessions` data from `useProjects`
- [ ] AC4: "Events" tab renders the existing EventTimeline, LivePulseChart, and AgentSwimLaneContainer (current App.vue content)
- [ ] AC5: "Dev Log" tab renders `<DevLogTimeline>` with `devLogs` data from `useProjects`
- [ ] AC6: Active tab has a visible indicator (underline or highlighted background) using theme CSS variables
- [ ] AC7: Tab state persists during the session (switching away and back preserves component state)
- [ ] AC8: Tab bar is responsive - tabs stack or scroll horizontally on mobile

## Technical Notes

### Current App.vue Structure (`apps/client/src/App.vue`)
The file currently has a flat layout (no tabs):
- Header (lines 3-63): connection status, event count, clear/filter/theme buttons
- FilterPanel (lines 67-72)
- LivePulseChart (lines 74-81)
- AgentSwimLaneContainer (lines 83-91)
- EventTimeline (lines 93-103)
- StickScrollButton (lines 105-110)
- Error message, ThemeManager, ToastNotification (lines 112-134)

### Tab Implementation Approach
Use a simple `ref<string>` for the active tab with `v-if` directives:

```typescript
const activeTab = ref<'projects' | 'events' | 'devlog'>('projects');
```

Use `v-if` (not `v-show`) for tabs to avoid mounting all components at once. The Events tab has heavy rendering (pulse chart, swim lanes) so lazy mounting is preferred.

**Alternative**: Use `<KeepAlive>` with `v-if` to cache tab state when switching:
```html
<KeepAlive>
  <ProjectOverview v-if="activeTab === 'projects'" ... />
</KeepAlive>
```

### Wiring Up useProjects
In `App.vue`, the existing `useWebSocket` call (line 154) must be updated to destructure the new `projects` and `sessions` refs:

```typescript
// Current (line 154):
const { events, isConnected, error, clearEvents } = useWebSocket(WS_URL);

// Updated:
const { events, isConnected, error, clearEvents, projects, sessions } = useWebSocket(WS_URL);

// Then create useProjects for dev logs:
import { useProjects } from './composables/useProjects';
const { devLogs } = useProjects(projects, sessions);
```

### New Imports Needed
```typescript
import ProjectOverview from './components/ProjectOverview.vue';
import DevLogTimeline from './components/DevLogTimeline.vue';
import { useProjects } from './composables/useProjects';
```

### Tab Bar Placement
Insert the tab bar between the header and the content area. It should be:
- Below the header gradient bar
- Above FilterPanel / content area
- Full width, with tabs left-aligned
- Sticky or fixed within the flex layout

### Tab Bar Styling
```html
<nav class="flex border-b border-[var(--theme-border-primary)] bg-[var(--theme-bg-primary)] px-4">
  <button
    v-for="tab in tabs"
    :key="tab.id"
    @click="activeTab = tab.id"
    class="px-4 py-2.5 text-sm font-medium transition-colors"
    :class="activeTab === tab.id
      ? 'text-[var(--theme-primary)] border-b-2 border-[var(--theme-primary)]'
      : 'text-[var(--theme-text-tertiary)] hover:text-[var(--theme-text-secondary)]'"
  >
    {{ tab.label }}
  </button>
</nav>
```

### Header Adjustments
The header title (line 8-9) should be updated from "Multi-Agent Observability" to "DevPulse" to reflect the new product name. The filter/clear buttons in the header should remain visible on the Events tab only, or be moved into the Events tab content.

### Content Area Restructuring
The main content area needs to be wrapped in conditional rendering:

```html
<!-- Projects Tab -->
<ProjectOverview v-if="activeTab === 'projects'" :projects="projects" :sessions="sessions" />

<!-- Events Tab (existing content) -->
<template v-if="activeTab === 'events'">
  <FilterPanel v-if="showFilters" ... />
  <LivePulseChart ... />
  <div v-if="selectedAgentLanes.length > 0" ...>
    <AgentSwimLaneContainer ... />
  </div>
  <div class="flex flex-col flex-1 overflow-hidden">
    <EventTimeline ... />
  </div>
  <StickScrollButton ... />
</template>

<!-- Dev Log Tab -->
<DevLogTimeline v-if="activeTab === 'devlog'" :dev-logs="devLogs" />
```

## Tasks
- [ ] Task 1: Add `activeTab` ref and tab configuration array in `App.vue` `<script setup>`
- [ ] Task 2: Add tab bar nav element between header and content in `App.vue` template (after line 64)
- [ ] Task 3: Update `useWebSocket` destructure on line 154 to include `projects` and `sessions`
- [ ] Task 4: Add `useProjects` import and call, passing `projects` and `sessions` refs
- [ ] Task 5: Add `ProjectOverview` and `DevLogTimeline` component imports
- [ ] Task 6: Wrap existing Events content (FilterPanel, LivePulseChart, AgentSwimLaneContainer, EventTimeline, StickScrollButton) inside `v-if="activeTab === 'events'"` block
- [ ] Task 7: Add `ProjectOverview` rendering for projects tab with `:projects` and `:sessions` props
- [ ] Task 8: Add `DevLogTimeline` rendering for devlog tab with `:dev-logs` prop
- [ ] Task 9: Update header title from "Multi-Agent Observability" to "DevPulse"
- [ ] Task 10: Conditionally show filter/clear buttons only when Events tab is active, OR move them into the Events tab content area

## Files to Create/Modify
| File | Action | Description |
|------|--------|-------------|
| `apps/client/src/App.vue` | Modify | Add tab navigation, wire up ProjectOverview and DevLogTimeline, restructure layout |

## Testing
- [ ] Test 1: Page loads with "Projects" tab active by default showing ProjectOverview component
- [ ] Test 2: Clicking "Events" tab shows the full existing event timeline with pulse chart and swim lanes
- [ ] Test 3: Clicking "Dev Log" tab shows the DevLogTimeline component
- [ ] Test 4: Tab indicator (underline) correctly follows the active tab
- [ ] Test 5: Projects tab receives live data updates via WebSocket (project cards update in real-time)
- [ ] Test 6: Dev Log tab shows fetched dev log entries
- [ ] Test 7: Switching tabs does not cause WebSocket disconnection
- [ ] Test 8: Filter/clear controls are appropriately scoped (not shown on non-Events tabs or moved into Events tab)

## Definition of Done
- [ ] Code compiles without errors (`cd apps/client && bun run build`)
- [ ] All acceptance criteria met
- [ ] No TypeScript errors
- [ ] Responsive on mobile and desktop (tabs don't overflow)
- [ ] Dark/light theme support works via CSS variables
- [ ] Existing Events tab functionality is unchanged
- [ ] No regressions in WebSocket connection or event display
